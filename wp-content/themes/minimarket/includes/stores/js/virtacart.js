/*virtacart*/
/*! Chained 0.9.10 - MIT license - Copyright 2010-2014 Mika Tuupola */
!function(a,b){"use strict";a.fn.chained=function(c){return this.each(function(){function d(){var d=!0,g=a("option:selected",e).val();a(e).html(f.html());var h="";a(c).each(function(){var c=a("option:selected",this).val();c&&(h.length>0&&(h+=b.Zepto?"\\\\":"\\"),h+=c)});var i;i=a.isArray(c)?a(c[0]).first():a(c).first();var j=a("option:selected",i).val();a("option",e).each(function(){a(this).hasClass(h)&&a(this).val()===g?(a(this).prop("selected",!0),d=!1):a(this).hasClass(h)||a(this).hasClass(j)||""===a(this).val()||a(this).remove()}),1===a("option",e).size()&&""===a(e).val()?a(e).prop("disabled",!0):a(e).prop("disabled",!1),d&&a(e).trigger("change")}var e=this,f=a(e).clone();a(c).each(function(){a(this).bind("change",function(){d()}),a("option:selected",this).length||a("option",this).first().attr("selected","selected"),d()})})},a.fn.chainedTo=a.fn.chained,a.fn.chained.defaults={}}(window.jQuery||window.Zepto,window,document);jQuery(function(){function a(a){a.find("[name=virtarich-item-qty]");var b=a.find("[name=virtarich-item-price]"),g=a.find("[name=virtarich-button]");jQuery.ajax({data:a.serialize()+"&virtarich-button="+g.val(),success:function(a){""===b.val()&&"none"===notivsalah.css("display")?notivsalah.show().delay("1000").fadeOut("10"):0<b.val()&&"none"===c.css("display")&&c.show().delay("1000").fadeOut("10");e.html(a);d()}})}function b(a){var b=a.parent().find('[name="virtacartItemId[]"]').val(),d=a.val();if(d)var c= window.setTimeout(function(){jQuery.ajax({data:{virtacartUpdate:1,itemId:b,itemQty:d,virtacartIsCheckout:f,virtacartToken:h}})},500);a.keydown(function(a){9!==a.which&&window.clearTimeout(c)})}function d(){var a=jQuery("#xtotalHarga").text(),b=jQuery("#xtotalBarang").text();jQuery("#tampilHarga").text(a);jQuery("#tampilJumlah").text(b)}var k=templateDirectory+"/includes/stores/cart",e=jQuery("#virtacart"),h=jQuery("[name=virtacartToken]").val(),c=jQuery("#virtacart-betul");notivsalah=jQuery("#virtacart-salah"); (function(){c.text("barang telah di tambahkan ke keranjang");notivsalah.text("tentukan pilihan");jQuery(".virtacart [type=submit]").mouseenter(function(a){jQuery("body").append(c);jQuery("body").append(notivsalah)}).mousemove(function(a){c.fadeOut("50");notivsalah.hide()}).mouseleave(function(){c.fadeOut("50");notivsalah.hide()});jQuery.ajaxSetup({type:"POST",url:k+"/cart.php",success:function(a){e.html(a);d()}})})();var f=jQuery("#virtacart-is-checkout").val();jQuery(".virtacart").submit(function(b){a(jQuery(this)); b.preventDefault()});e.keydown(function(a){13===a.which&&a.preventDefault()});e.delegate('[name="virtacartItemQty[]"]',"keyup",function(){b(jQuery(this))});e.delegate(".virtacart-remove","click",function(a){var b=jQuery(this).attr("href"),b=b.split("=");jQuery.ajax({type:"GET",data:{virtacartRemove:b[1],virtacartIsCheckout:f}});a.preventDefault()});d()}); jQuery("#virtarich_select").change(function(){var a=jQuery("#kode").val(),b=jQuery("#virtarich_select :selected").text();jQuery("#virtarich-item-price").val(jQuery("#virtarich_select").val());jQuery("#virtarich-item-pilihan").val(b);jQuery("#virtarich-item-id").val(a+"-"+b)});jQuery(document).ready(function(){jQuery(".cart .cart-down").hide();jQuery(".cart").hover(function(){jQuery(".cart .cart-down").stop(!0,!0).slideDown("fast")},function(){jQuery(".cart .cart-down").stop(!0,!0).delay(200).slideUp("fast")})}); function CleanNumber(a){newValue=a.replace(".","");newValue=newValue.replace("Rp","");return newValue=newValue.replace(/ /g,"")}function priceFormatted(a){a=parseInt(a);if(isNaN(a))return"";a=Math.abs(a);a=new String(a);for(var b=[];3<a.length;){var d=a.substr(a.length-3);b.unshift(d);a=a.substr(0,a.length-3)}0<a.length&&b.unshift(a);a=b.join(".");return"Rp "+a}jQuery(document).ready(function(){jQuery("#kota").chained("#propinsi")}); function dynamic_Select(a,b){jQuery.ajax({type:"GET",url:a,data:"ch="+b,dataType:"html",success:function(a){jQuery("#kecamatan").html(a);jQuery("#dummy").remove()}})}jQuery(document).ready(function(){jQuery("#cekOngkir").click(function(){var a=jQuery("#kec").val();jQuery("#hargaOngkir").val(priceFormatted(a))})});